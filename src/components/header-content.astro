---
import openProjectsBadge from '@/assets/open-projects-badge.svg';
import Availability from '@/components/availability.astro';
import ResumeButton from '@/components/resume-button.astro';
import SvgSprite from '@/components/SvgSprite.astro';
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';

const socials = await getCollection('social');
---

<div
	id="header-content-wrapper"
	class="flex w-full flex-col justify-between rounded-2xl bg-gray-200 p-5 text-black sm:rounded-3xl sm:p-24 lg:p-20"
>
	<div class="flex items-center justify-between">
		<a
			href="/"
			aria-current="page"
			class="c-animated-text js-split-lines js-animation-reveal-text-wrapper font-sans-serif font-semibold uppercase leading-none text-3xl sm:font-extrabold"
		>
			shotcowboystyle.
		</a>

		<div
			class="pointer-events-auto grid auto-cols-auto grid-flow-col grid-cols-[auto] grid-rows-[auto] content-center items-center justify-end justify-items-end gap-8"
		>
			<div class="hidden sm:block">
				<Availability />
			</div>

			<a
				id="lets-talk-button"
				href="nowayjose"
				target="_blank"
				rel="noopener noreferrer"
				class="js-inject-email-link group btn btn-circle btn-neutral relative flex h-20 w-20 items-center justify-center bg-black text-center font-medium !leading-none text-white text-base sm:h-32 sm:w-32 lg:h-24 lg:w-24"
			>
				<span
					id="lets-talk-label"
					class="relative z-[1] normal-case text-white max-sm:!leading-4 max-sm:text-xs sm:!leading-none sm:text-lg"
				>
					Let's<br />Talk
				</span>

				<span
					class="absolute inset-0 z-0 rounded-full bg-black transition-all group-hover:scale-150"
				></span>
			</a>
		</div>
	</div>

	<div class="relative">
		<div
			class="header-content-content-wrapper mb-6 flex items-start max-lg:flex-col lg:mb-16 lg:items-end"
		>
			<div class="c-animated-big-text__text relative">
				<div class="anim-h1-wrapper">
					<h1
						id="header-headline"
						class="c-animated-text js-split-lines js-animation-reveal-text-wrapper mb-2 max-w-[8ch] uppercase !leading-[.9] max-sm:text-9xl sm:mb-0 sm:max-w-[18ch]"
					>
						Full Stack<br />Senior Developer.
					</h1>
				</div>

				<div
					id="header-badge"
					class="absolute -top-[20%] right-[-15%] h-24 w-24 scale-0 opacity-0 sm:-right-[15%] sm:-top-[20%] md:h-48 md:w-48 lg:-right-[20%] lg:h-40 lg:w-40"
				>
					<Image
						src={openProjectsBadge}
						alt="Open for new projects"
						widths={[108, 216, openProjectsBadge.width]}
						class="inline-block max-w-full align-middle motion-safe:animate-spin-circle"
					/>
				</div>
			</div>

			<div class="sm:hidden">
				<Availability />
			</div>

			<p
				id="header-intro"
				class="c-animated-text js-split-words js-animation-reveal-text-wrapper mb-0 mt-4 max-w-[25ch] !leading-5 sm:mb-16 sm:!leading-tight lg:mb-4 lg:ml-auto"
			>
				I help companies build robust, scalable and engaging experiences through motion and space.
			</p>
		</div>

		<div
			id="header-links-wrapper"
			class="pointer-events-auto relative flex justify-between"
		>
			<div
				id="header-links"
				class="grid auto-cols-[1fr] grid-flow-row grid-cols-[auto] grid-rows-[auto] items-center gap-y-8 sm:auto-cols-auto sm:grid-flow-col sm:!gap-4"
			>
				<div
					class="header-social-links grid auto-cols-auto grid-flow-col grid-cols-[auto] grid-rows-[auto] items-center justify-start gap-4"
				>
					{
						socials.map((social) => (
							<a
								aria-label={`Go to my ${social.data.name} profile`}
								href={social.data.link}
								target="_blank"
								rel="me noopener noreferrer"
								class="inline-block h-5 w-5 sm:block sm:h-8 sm:w-8 lg:h-5 lg:w-5"
							>
								<div class="h-5 w-5 text-black sm:h-8 sm:w-8 lg:h-5 lg:w-5">
									<SvgSprite
										name={social.data.icon}
										class="h-5 w-5 stroke-black sm:h-8 sm:w-8 lg:h-5 lg:w-5"
									/>
								</div>
							</a>
						))
					}
				</div>

				<div class="flex gap-2 sm:gap-3">
					<a
						class="scroll-link btn btn-neutral btn-sm justify-self-start rounded-full bg-black font-medium uppercase text-white hover:scale-110 sm:!min-h-[3rem] sm:justify-self-auto sm:!px-4 lg:!min-h-[2.25rem] lg:!px-4"
						href="#about"
						role="button"
						id="about-button"
					>
						About Me
					</a>

					<ResumeButton />
				</div>
			</div>

			<div
				id="scroll-animation"
				class="js-lottie-animation absolute bottom-0 right-0 w-12 sm:w-16"
				data-animation-name="scroll-animation"
				data-animation-source="/animation/lottie-scroll.json"
				data-animation-play-control="autoplay"
				data-animation-loop="true"
			>
			</div>
		</div>
	</div>
</div>

<style>
	@media screen and (orientation: portrait) and (hover: none) {
		.header-content-content-wrapper {
			@apply mb-4;
		}
	}

	@media screen and (orientation: landscape) and (hover: none) {
		#header-content-wrapper {
			@apply p-12;
		}

		#header-intro {
			@apply mb-2;
		}
	}

	#header-links {
		@media screen and (orientation: portrait) and (hover: none) {
			@apply gap-5;
		}
	}

	.header-social-links {
		grid-area: 2 / 1 / 3 / 2;

		@media screen(md) {
			grid-area: auto;
		}

		@media screen and (orientation: landscape) and (hover: none) {
			grid-area: auto;
		}

		svg {
			@apply fill-neutral;
		}
	}
</style>
